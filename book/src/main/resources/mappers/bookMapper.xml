<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo.yedam.service.impl.Bookmapper">

<!-- 리스트조회 -->
<select id="selectBook" resultType="bookVO">
SELECT book_no,
       book_name,
       book_coverimg,
       book_date,
       book_price,
       book_publisher,
       book_info
FROM book_tbl_06
</select>


<!-- 등록 -->
<insert id="insertBook">
 INSERT INTO book_tbl_06(
       book_no,
       book_name,
       book_coverimg,
       book_date,
       book_price,
       book_publisher,
       book_info
 )
 VALUES (
       #{bookNo},
       #{bookName},
       #{bookCoverimg},
       #{bookDate},
       #{bookPrice},
       #{bookPublisher}, 
       #{bookInfo}
 )
 
</insert>

<!-- 대출현황 -->
<select id = "selectRent" resultType="RentVO">
SELECT r.BOOK_NO,
       b.BOOK_NAME, 
      COUNT(*) AS rent_no, 
      SUM(r.RENT_PRICE) AS rent_price
FROM RENT_TBL_06 r
JOIN BOOK_TBL_06 b 
ON r.BOOK_NO = b.BOOK_NO
GROUP BY r.BOOK_NO, b.BOOK_NAME
</select>


</mapper>